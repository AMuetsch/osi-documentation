

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Program Listing for File README.md &mdash; Open Simulation Interface v3.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Open Simulation Interface
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Open Simulation Interface:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Open Simulation Interface (OSI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/description.html">General description</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/fileformat.html">OSI File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/coordinatesystem.html">Coordinate systems and reference points</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/interfaceconventions.html">Interface Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/commenting.html">Commenting</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc/howtocontribute.html">Contributors’ Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_root.html">OSI Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">OSI Validator:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../osi-validation/README.html">OSI Validator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-validation/doc/description.html">General description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-validation/doc/howtocontribute.html">Contributors’ Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-validation/doc/osivalidator.html">Validator Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">OSI Visualizer:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../osi-visualizer/README.html">OSI Visualizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-visualizer/doc/panels.html">Panels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-visualizer/doc/nvidia-docker.html">Nvidia Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-visualizer/doc/howtocontribute.html">Contributors’ Guidelines</a></li>
</ul>
<p class="caption"><span class="caption-text">OSI Sensor Model Packaging:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../osi-sensor-model-packaging/README.html">OSI Sensor Model Packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-sensor-model-packaging/doc/specification.html">OSI Sensor Model Packaging Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../osi-sensor-model-packaging/doc/examples.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Proto2Cpp:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../proto2cpp/README.html">Doxygen filter for Google Protocol Buffers .proto files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proto2cpp/README.html#version-history">Version history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proto2cpp/README.html#copyright">Copyright</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open Simulation Interface</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Program Listing for File README.md</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/open-simulation-interface/program_listing_file_osi-documentation_open-simulation-interface_README.md.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="program-listing-for-file-readme-md">
<span id="program-listing-file-osi-documentation-open-simulation-interface-readme-md"></span><h1>Program Listing for File README.md<a class="headerlink" href="#program-listing-for-file-readme-md" title="Permalink to this headline">¶</a></h1>
<p>↰ <a class="reference internal" href="file_osi-documentation_open-simulation-interface_README.md.html#file-osi-documentation-open-simulation-interface-readme-md"><span class="std std-ref">Return to documentation for file</span></a> (<code class="docutils literal notranslate"><span class="pre">osi-documentation/open-simulation-interface/README.md</span></code>)</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh">Open Simulation Interface (OSI)</span>
<span class="gh">===============================</span>

[<span class="nt">![ProtoBuf CI Builds</span>](<span class="na">https://github.com/OpenSimulationInterface/open-simulation-interface/actions/workflows/protobuf.yml/badge.svg</span>)](https://github.com/OpenSimulationInterface/open-simulation-interface/actions/workflows/protobuf.yml)

The Open Simulation Interface &lt;sup&gt;[[1]](https://www.hot.ei.tum.de/forschung/automotive-veroeffentlichungen/)&lt;/sup&gt; (OSI) is a generic interface based on [<span class="nt">Google&#39;s protocol buffers</span>](<span class="na">https://developers.google.com/protocol-buffers/</span>) for the environmental perception of automated driving functions in virtual scenarios.

As the complexity of automated driving functions rapidly increases, the requirements for test and development methods are growing. Testing in virtual environments offers the advantage of completely controlled and reproducible environment conditions.

For more information on OSI see the [<span class="nt">official documentation</span>](<span class="na">https://opensimulationinterface.github.io/osi-documentation/</span>) or the [<span class="nt">official reference documentation</span>](<span class="na">https://opensimulationinterface.github.io/open-simulation-interface/</span>) for defined protobuf messages.

[1] Hanke, T., Hirsenkorn, N., van-Driesten, C., Garcia-Ramos, P., Schiementz, M., Schneider, S. &amp; Biebl, E. (2017, February 03). <span class="ge">*A generic interface for the environment perception of automated driving functions in virtual scenarios.*</span> Retrieved January 25, 2020, from https://www.hot.ei.tum.de/forschung/automotive-veroeffentlichungen/

<span class="gu">## Usage</span>
<span class="gu">##### Example of generating OSI messages in `Python`</span>
<span class="sb">```python</span>
<span class="c1"># generate_osi_messages.py</span>
<span class="kn">from</span> <span class="nn">osi3.osi_sensorview_pb2</span> <span class="kn">import</span> <span class="n">SensorView</span>
<span class="kn">import</span> <span class="nn">struct</span>

<span class="n">NANO_INCREMENT</span> <span class="o">=</span> <span class="mi">10000000</span>
<span class="n">MOVING_OBJECT_LENGTH</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">MOVING_OBJECT_WIDTH</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">MOVING_OBJECT_HEIGHT</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Initialize SensorView&quot;&quot;&quot;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sv_330_361_1000_movingobject.osi&quot;</span><span class="p">,</span> <span class="s2">&quot;ab&quot;</span><span class="p">)</span>
    <span class="n">sensorview</span> <span class="o">=</span> <span class="n">SensorView</span><span class="p">()</span>

    <span class="n">sv_ground_truth</span> <span class="o">=</span> <span class="n">sensorview</span><span class="o">.</span><span class="n">global_ground_truth</span>
    <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version_major</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version_minor</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version_patch</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">moving_object</span> <span class="o">=</span> <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">moving_object</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
    <span class="n">moving_object</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="c1"># Generate 1000 OSI messages for a duration of 10 seconds</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>

        <span class="c1"># Increment the time</span>
        <span class="k">if</span> <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">&gt;</span> <span class="mi">1000000000</span><span class="p">:</span>
            <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">sv_ground_truth</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">+=</span> <span class="n">NANO_INCREMENT</span>

        <span class="n">moving_object</span><span class="o">.</span><span class="n">vehicle_classification</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">dimension</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">MOVING_OBJECT_LENGTH</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">dimension</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">MOVING_OBJECT_WIDTH</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">dimension</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">MOVING_OBJECT_HEIGHT</span>

        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mf">0.5</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">roll</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">moving_object</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="sd">&quot;&quot;&quot;Serialize&quot;&quot;&quot;</span>
        <span class="n">bytes_buffer</span> <span class="o">=</span> <span class="n">sensorview</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&lt;L&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bytes_buffer</span><span class="p">)))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">bytes_buffer</span><span class="p">)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
<span class="sb">```</span>

To run the script execute the following command in the terminal:
<span class="sb">```bash</span>
python3 generate_osi_messages.py
<span class="sb">```</span>

This will output an osi file (<span class="sb">`sv_330_361_1000_movingobject.osi`</span>) which can be visualized and played back by the [<span class="nt">osi-visualizer</span>](<span class="na">https://github.com/OpenSimulationInterface/osi-visualizer</span>).

See Google&#39;s documentation for more tutorials on how to use protocol buffers with [<span class="nt">Python</span>](<span class="na">https://developers.google.com/protocol-buffers/docs/pythontutorial</span>) or [<span class="nt">C++</span>](<span class="na">https://developers.google.com/protocol-buffers/docs/cpptutorial</span>).
<span class="gu">## Installation</span>
<span class="gu">##### Dependencies</span>
Install <span class="sb">`cmake`</span> 3.10.2:
<span class="sb">```bash</span>
$ sudo apt-get install cmake
<span class="sb">```</span>
Install <span class="sb">`pip3`</span> and missing python packages:
<span class="sb">```bash</span>
$ sudo apt-get install python3-pip python3-setuptools
<span class="sb">```</span>
Install <span class="sb">`protobuf`</span> 3.0.0:
<span class="sb">```bash</span>
$ sudo apt-get install libprotobuf-dev protobuf-compiler
<span class="sb">```</span>


<span class="gu">##### Build and install for `C++` usage:</span>
<span class="sb">```bash</span>
$ git clone https://github.com/OpenSimulationInterface/open-simulation-interface.git
$ <span class="nb">cd</span> open-simulation-interface
$ mkdir build
$ <span class="nb">cd</span> build
$ cmake ..
$ make
$ sudo make install
<span class="sb">```</span>

<span class="gu">##### Install for `Python` usage:</span>
Local:
<span class="sb">```bash</span>
$ git clone https://github.com/OpenSimulationInterface/open-simulation-interface.git
$ <span class="nb">cd</span> open-simulation-interface
$ sudo pip3 install virtualenv
$ virtualenv -p python3 venv
$ <span class="nb">source</span> venv/bin/activate
$ python3 -m pip install .
<span class="sb">```</span>

Global:
<span class="sb">```bash</span>
$ git clone https://github.com/OpenSimulationInterface/open-simulation-interface.git
$ <span class="nb">cd</span> open-simulation-interface
$ sudo pip3 install .
<span class="sb">```</span>
For Windows installation see [<span class="nt">here</span>](<span class="na">https://opensimulationinterface.github.io/osi-documentation/open-simulation-interface/doc/windows.html</span>) for more information.
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, ASAM e.V..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>